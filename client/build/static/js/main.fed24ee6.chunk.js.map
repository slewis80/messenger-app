{"version":3,"sources":["store/user.js","store/utils/reducerFunctions.js","store/conversations.js","store/activeConversation.js","store/index.js","themes/theme.js","socket.js","store/utils/thunkCreators.js","Signup.js","assets/images/bubble.svg","assets/images/bg-img.png","Login.js","components/Sidebar/ChatContent.js","components/Sidebar/CurrentUser.js","components/Sidebar/Search.js","components/Sidebar/Sidebar.js","components/Sidebar/SidebarContainer.js","components/Sidebar/Chat.js","components/Sidebar/BadgeAvatar.js","components/ActiveChat/SenderBubble.js","components/ActiveChat/OtherUserBubble.js","components/ActiveChat/ActiveChat.js","components/ActiveChat/Input.js","components/ActiveChat/Header.js","components/ActiveChat/Messages.js","components/Home.js","components/SnackbarError.js","routes.js","App.js","serviceWorker.js","index.js"],"names":["GET_USER","SET_FETCHING_STATUS","gotUser","user","type","setFetchingStatus","isFetching","reducer","state","action","addMessageToStore","payload","message","sender","newConvo","id","conversationId","otherUser","messages","latestMessageText","text","map","convo","convoCopy","push","addUnreadMessagesToStore","unreadMessages","forEach","read","addOnlineUserToStore","socketId","online","removeOfflineUserFromStore","addSearchedUsersToStore","users","currentUsers","newState","fakeConvo","addNewConvoToStore","recipientId","GET_CONVERSATIONS","SET_MESSAGE","ADD_ONLINE_USER","REMOVE_OFFLINE_USER","SET_SEARCHED_USERS","CLEAR_SEARCHED_USERS","ADD_CONVERSATION","ADD_UNREAD_MESSAGES","setNewMessage","conversations","filter","newMessage","SET_ACTIVE_CHAT","username","CLEAR_ON_LOGOUT","appReducer","combineReducers","activeConversation","createStore","undefined","applyMiddleware","thunkMiddleware","loggerMiddleware","theme","createTheme","typography","fontFamily","fontSize","button","textTransform","letterSpacing","fontWeight","overrides","MuiInput","input","palette","primary","main","secondary","socket","io","window","location","origin","transports","reconnectionAttempts","on","console","log","store","dispatch","addOnlineUser","removeOfflineUser","data","axios","interceptors","request","use","a","config","localStorage","getItem","token","headers","saveMessage","body","post","sendMessage","messageData","emit","updateMessageReadStatus","conversation","put","connect","register","credentials","setItem","auth","error","response","props","history","useHistory","useState","formErrorMessage","setFormErrorMessage","handleRegister","event","preventDefault","target","value","email","password","confirmPassword","to","Grid","container","justify","Box","item","Typography","Button","onClick","onSubmit","FormControl","TextField","label","name","required","inputProps","minLength","FormHelperText","variant","size","useStyles","makeStyles","root","height","margin","padding","heading","sidebar","backgroundImage","bgImg","backgroundRepeat","textAlign","width","backgroundSize","sidebarOverlay","display","flexDirection","alignItems","justifyContent","opacity","color","paper","marginLeft","form","login","classes","handleLogin","className","xs","sm","md","lg","src","bubble","alt","fullWidth","InputProps","endAdornment","InputAdornment","position","flexGrow","previewText","previewTextNew","badge","notification","backgroundColor","marginRight","borderRadius","ChatContent","setUnreadMessages","useEffect","senderId","prevMessages","length","marginTop","subContainer","ellipsis","BadgeAvatar","photoUrl","Search","handleSubmit","this","hiddenLabel","FilledInput","onChange","handleChange","filledInput","disableUnderline","placeholder","startAdornment","Component","withStyles","background","marginBottom","paddingLeft","paddingRight","title","searchTerm","includes","searchUsers","get","clearSearchedUsers","setSearchTerm","setActiveChat","boxShadow","cursor","handleClick","profilePic","border","UserAvatar","Badge","anchorOrigin","horizontal","vertical","overlap","Avatar","date","seenBySelf","seenByOther","receiptPic","SenderBubble","time","sendersRecent","avatar","usernameDate","OtherUserBubble","chatContainer","find","userId","Input","setState","reqBody","postMessage","justifySelf","content","statusText","statusDot","Header","Messages","recentMessage","setSendersRecent","messagesByCurrentUser","moment","createdAt","format","Home","handleLogout","logout","isLoggedIn","prevProps","fetchConversations","component","CssBaseline","delete","removeItem","snackbar","icon","SnackbarError","Snackbar","open","snackBarOpen","onClose","setSnackBarOpen","errorMessage","Fragment","ContentProps","withRouter","fetchUser","setErrorMessage","isFetchingUser","path","Login","Signup","exact","render","App","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"qQAEMA,EAAW,WACXC,EAAsB,sBAIfC,EAAU,SAACC,GACtB,MAAO,CACLC,KAAMJ,EACNG,SAISE,EAAoB,SAACC,GAAD,MAAiB,CAChDF,KAAMH,EACNK,eAmBaC,EAdC,WAA2C,IAA1CC,EAAyC,uDAAjC,CAAEF,YAAY,GAAQG,EAAW,uCACxD,OAAQA,EAAOL,MACb,KAAKJ,EACH,OAAOS,EAAON,KAChB,KAAKF,EACH,OAAO,2BACFO,GADL,IAEEF,WAAYG,EAAOH,aAEvB,QACE,OAAOE,I,QC/BAE,EAAoB,SAACF,EAAOG,GACvC,IAAQC,EAAoBD,EAApBC,QAASC,EAAWF,EAAXE,OAEjB,GAAe,OAAXA,EAAiB,CACnB,IAAMC,EAAW,CACfC,GAAIH,EAAQI,eACZC,UAAWJ,EACXK,SAAU,CAACN,IAGb,OADAE,EAASK,kBAAoBP,EAAQQ,KAC/B,CAAEN,GAAR,mBAAqBN,IAEvB,OAAOA,EAAMa,KAAI,SAACC,GAChB,GAAIA,EAAMP,KAAOH,EAAQI,eAAgB,CACvC,IAAMO,EAAS,eAAQD,GAIvB,OAHAC,EAAUL,SAASM,KAAKZ,GACxBW,EAAUJ,kBAAoBP,EAAQQ,KAE/BG,EAEP,OAAOD,MAKAG,EAA2B,SAACjB,GACvC,IAAMkB,EAAiB,GAOvB,OALAlB,EAAMmB,SAAQ,SAACL,GACRA,EAAMV,QAAQgB,MACjBF,EAAeF,KAAKF,EAAMV,YAGvBc,GAGIG,EAAuB,SAACrB,EAAOO,EAAIe,GAC9C,OAAOtB,EAAMa,KAAI,SAACC,GAChB,GAAIA,EAAML,UAAUF,KAAOA,EAAI,CAC7B,IAAMQ,EAAS,eAAQD,GAGvB,OAFAC,EAAUN,UAAUc,QAAS,EAC7BR,EAAUN,UAAUa,SAAWA,EACxBP,EAEP,OAAOD,MAKAU,EAA6B,SAACxB,EAAOL,GAChD,OAAOK,EAAMa,KAAI,SAACC,GAChB,GAAIA,EAAML,UAAUF,KAAOZ,EAAKY,GAAI,CAClC,IAAMQ,EAAS,eAAQD,GAGvB,OAFAC,EAAUN,UAAUc,QAAS,EAC7BR,EAAUN,UAAUa,SAAW,GACxBP,EAEP,OAAOD,MAKAW,EAA0B,SAACzB,EAAO0B,GAC7C,IAAMC,EAAe,GAGrB3B,EAAMmB,SAAQ,SAACL,GACba,EAAab,EAAML,UAAUF,KAAM,KAGrC,IAAMqB,EAAQ,YAAO5B,GASrB,OARA0B,EAAMP,SAAQ,SAACxB,GAEb,IAAKgC,EAAahC,EAAKY,IAAK,CAC1B,IAAIsB,EAAY,CAAEpB,UAAWd,EAAMe,SAAU,IAC7CkB,EAASZ,KAAKa,OAIXD,GAGIE,EAAqB,SAAC9B,EAAO+B,EAAa3B,GACrD,OAAOJ,EAAMa,KAAI,SAACC,GAChB,GAAIA,EAAML,UAAUF,KAAOwB,EAAa,CACtC,IAAMzB,EAAQ,eAAQQ,GAItB,OAHAR,EAASC,GAAKH,EAAQI,eACtBF,EAASI,SAASM,KAAKZ,GACvBE,EAASK,kBAAoBP,EAAQQ,KAC9BN,EAEP,OAAOQ,MChFPkB,EAAoB,oBACpBC,EAAc,cACdC,EAAkB,kBAClBC,EAAsB,sBACtBC,EAAqB,qBACrBC,EAAuB,uBACvBC,EAAmB,mBACnBC,EAAsB,sBAWfC,EAAgB,SAACpC,EAASC,GACrC,MAAO,CACLT,KAAMqC,EACN9B,QAAS,CAAEC,UAASC,OAAQA,GAAU,QA6E3BN,EA7BC,WAAyB,IAAxBC,EAAuB,uDAAf,GAAIC,EAAW,uCACtC,OAAQA,EAAOL,MACb,KAAKoC,EACH,OAAO/B,EAAOwC,cAChB,KAAKR,EACH,OAAO/B,EAAkBF,EAAOC,EAAOE,SACzC,KAAKoC,EACH,OAAOtB,EAAyBjB,GAClC,KAAKkC,EACH,OAAOb,EAAqBrB,EAAOC,EAAOM,GAAIN,EAAOqB,UAEvD,KAAKa,EACH,OAAOX,EAA2BxB,EAAOC,EAAON,MAElD,KAAKyC,EACH,OAAOX,EAAwBzB,EAAOC,EAAOyB,OAC/C,KAAKW,EACH,OAAOrC,EAAM0C,QAAO,SAAC5B,GAAD,OAAWA,EAAMP,MACvC,KAAK+B,EACH,OAAOR,EACL9B,EACAC,EAAOE,QAAQ4B,YACf9B,EAAOE,QAAQwC,YAEnB,QACE,OAAO3C,ICzGP4C,EAAkB,kBAmBT7C,EAVC,WAAyB,IAAxBC,EAAuB,uDAAf,GAAIC,EAAW,uCACtC,OAAQA,EAAOL,MACb,KAAKgD,EACH,OAAO3C,EAAO4C,SAEhB,QACE,OAAO7C,ICPP8C,EAAkB,kBAQlBC,EAAaC,YAAgB,CACjCrD,OACA8C,gBACAQ,uBAUaC,eARK,SAAClD,EAAOC,GAK1B,OAJIA,EAAOL,OAASkD,IAElB9C,OAAQmD,GAEHJ,EAAW/C,EAAOC,KAGamD,YAAgBC,IAAiBC,M,SC3B5DC,EAAQC,YAAY,CAC/BC,WAAY,CACVC,WAAY,wBACZC,SAAU,GACVC,OAAQ,CACNC,cAAe,OACfC,cAAe,EACfC,WAAY,SAGhBC,UAAW,CACTC,SAAU,CACRC,MAAO,CACLH,WAAY,UAIlBI,QAAS,CACPC,QAAS,CAAEC,KAAM,WACjBC,UAAW,CAAED,KAAM,c,kECbjBE,EAASC,aAAGC,OAAOC,SAASC,OAChC,CAAEC,WAAY,CAAC,YACf,CAAEC,qBAAsB,IAE1BN,EAAOO,GAAG,WAAW,WACjBC,QAAQC,IAAI,wBACZD,QAAQC,IAAIT,EAAOhE,IAErBgE,EAAOO,GAAG,mBAAmB,SAACnF,GAC5B,IAAMY,EAAKZ,EAAKY,GACVe,EAAW3B,EAAK2B,SACtB2D,EAAMC,SJiBmB,SAAC3E,EAAIe,GAChC,MAAO,CACL1B,KAAMsC,EACN3B,KACAe,YIrBe6D,CAAc5E,EAAIe,OAGnCiD,EAAOO,GAAG,uBAAuB,SAACnF,GAChCsF,EAAMC,SJqBuB,SAACvF,GAChC,MAAO,CACLC,KAAMuC,EACNxC,QIxBeyF,CAAkBzF,OAGnC4E,EAAOO,GAAG,eAAe,SAACO,GACxBJ,EAAMC,SAAS1C,EAAc6C,EAAKjF,QAASiF,EAAKhF,eAIrCkE,QCrBfe,IAAMC,aAAaC,QAAQC,IAA3B,+BAAAC,EAAA,MAA+B,WAAgBC,GAAhB,eAAAD,EAAA,sEACTE,aAAaC,QAAQ,mBADZ,cACvBC,EADuB,OAE7BH,EAAOI,QAAQ,kBAAoBD,EAFN,kBAItBH,GAJsB,2CAA/B,uDASO,IAoEDK,GAAW,uCAAG,WAAOC,GAAP,iBAAAP,EAAA,sEACKJ,IAAMY,KAAK,gBAAiBD,GADjC,uBACVZ,EADU,EACVA,KADU,kBAEXA,GAFW,2CAAH,sDAKXc,GAAc,SAACd,EAAMY,GACzB,IAAMG,EAAc,CAClBhG,QAASiF,EAAKjF,QACd2B,YAAakE,EAAKlE,YAClB1B,OAAQgF,EAAKhF,QAEfkE,EAAO8B,KAAK,cAAe,CAACD,iBAqBjBE,GAAuB,uCAAG,WAAOC,GAAP,mBAAAb,EAAA,sEAE7BhF,EAAW6F,EAAa7F,SAFK,SAIZ4E,IAAMkB,IAAN,wBAA2BD,EAAahG,IAAMG,GAJlC,uBAI3B2E,EAJ2B,EAI3BA,KAJ2B,kBAK5BA,GAL4B,gCAQnCN,QAAQC,IAAR,MARmC,yDAAH,sD,8ECIrByB,gBAdS,SAACzG,GACvB,MAAO,CACLL,KAAMK,EAAML,SAIW,SAACuF,GAC1B,MAAO,CACLwB,SAAU,SAACC,GACTzB,EDnFkB,SAACyB,GAAD,8CAAiB,WAAOzB,GAAP,mBAAAQ,EAAA,+EAEdJ,IAAMY,KAAK,iBAAkBS,GAFf,uBAE7BtB,EAF6B,EAE7BA,KAF6B,SAG/BO,aAAagB,QAAQ,kBAAmBvB,EAAKS,OAHd,OAIrCZ,EAASxF,EAAQ2F,IACXS,EAAQT,EAAKS,MACnBvB,EAAOsC,KAAO,CAACf,SACfvB,EAAOkC,UACPlC,EAAO8B,KAAK,YAAahB,EAAK9E,IARO,kDAUrCwE,QAAQ+B,MAAR,MACA5B,EAASxF,EAAQ,CAAEoH,MAAO,KAAMC,SAAS1B,KAAKyB,OAAS,kBAXlB,0DAAjB,sDCmFTJ,CAASC,QAKTF,EA7GD,SAACO,GACb,IAAMC,EAAUC,cACRvH,EAAmBqH,EAAnBrH,KAAM+G,EAAaM,EAAbN,SACd,EAAgDS,mBAAS,IAAzD,mBAAOC,EAAP,KAAyBC,EAAzB,KAEMC,EAAc,uCAAG,WAAOC,GAAP,qBAAA7B,EAAA,yDACrB6B,EAAMC,iBACA3E,EAAW0E,EAAME,OAAO5E,SAAS6E,MACjCC,EAAQJ,EAAME,OAAOE,MAAMD,MAC3BE,EAAWL,EAAME,OAAOG,SAASF,MACjCG,EAAkBN,EAAME,OAAOI,gBAAgBH,MAEjDE,IAAaC,EAPI,uBAQnBR,EAAoB,CAAEQ,gBAAiB,yBARpB,2CAYfnB,EAAS,CAAE7D,WAAU8E,QAAOC,aAZb,4CAAH,sDAepB,OAAIjI,EAAKY,GACA,eAAC,IAAD,CAAUuH,GAAG,UAIpB,eAACC,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,SAAxB,SACE,gBAACC,GAAA,EAAD,WACE,gBAACH,GAAA,EAAD,CAAMC,WAAS,EAACG,MAAI,EAApB,UACE,eAACC,GAAA,EAAD,8BACA,eAACC,GAAA,EAAD,CAAQC,QAAS,kBAAMrB,EAAQjG,KAAK,WAApC,sBAEF,uBAAMuH,SAAUjB,EAAhB,SACE,gBAACS,GAAA,EAAD,WACE,eAACA,GAAA,EAAD,UACE,eAACS,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CACE,aAAW,WACXC,MAAM,WACNC,KAAK,WACL/I,KAAK,OACLgJ,UAAQ,QAId,eAACb,GAAA,EAAD,UACE,eAACS,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CACEC,MAAM,iBACN,aAAW,iBACX9I,KAAK,QACL+I,KAAK,QACLC,UAAQ,QAId,eAACb,GAAA,EAAD,UACE,gBAACS,GAAA,EAAD,CAAa1B,QAASM,EAAiBS,gBAAvC,UACE,eAACY,GAAA,EAAD,CACE,aAAW,WACXC,MAAM,WACN9I,KAAK,WACLiJ,WAAY,CAAEC,UAAW,GACzBH,KAAK,WACLC,UAAQ,IAEV,eAACG,GAAA,EAAD,UACG3B,EAAiBS,uBAIxB,eAACE,GAAA,EAAD,UACE,gBAACS,GAAA,EAAD,CAAa1B,QAASM,EAAiBS,gBAAvC,UACE,eAACY,GAAA,EAAD,CACEC,MAAM,mBACN,aAAW,mBACX9I,KAAK,WACLiJ,WAAY,CAAEC,UAAW,GACzBH,KAAK,kBACLC,UAAQ,IAEV,eAACG,GAAA,EAAD,UACG3B,EAAiBS,uBAIxB,eAACQ,GAAA,EAAD,CAAQzI,KAAK,SAASoJ,QAAQ,YAAYC,KAAK,QAA/C,iCCnGG,OAA0B,mCCA1B,OAA0B,mC,oBCiBnCC,GAAYC,cAAW,iBAAO,CAClCC,KAAM,CACJC,OAAQ,SAEVzF,OAAQ,CACN0F,OAAQ,sBACRC,QAAS,aAEXC,QAAS,CACPF,OAAQ,qBACRC,QAAS,sBAEXE,QAAS,CACPC,gBAAgB,OAAD,OAASC,GAAT,KACfC,iBAAkB,YAClBC,UAAW,SACXC,MAAO,OACPC,eAAgB,QAChBT,OAAQ,KAEVU,eAAgB,CACdC,QAAS,OACTC,cAAe,SACfC,WAAY,SACZC,eAAgB,SAChBV,gBAAiB,4CACjBW,QAAS,MACTP,MAAO,OACPT,OAAQ,OACRU,eAAgB,QAChBO,MAAO,QACP5G,WAAY,gCAEd6G,MAAO,CACLN,QAAS,OACTC,cAAe,SACfX,QAAS,SACTiB,WAAY,QAEdC,KAAM,CACJR,QAAS,OACTC,cAAe,SACfE,eAAgB,SAChBD,WAAY,SACZZ,QAAS,YA8GE9C,gBAdS,SAACzG,GACvB,MAAO,CACLL,KAAMK,EAAML,SAIW,SAACuF,GAC1B,MAAO,CACLwF,MAAO,SAAC/D,GACNzB,EJpHe,SAACyB,GAAD,8CAAiB,WAAOzB,GAAP,mBAAAQ,EAAA,+EAEXJ,IAAMY,KAAK,cAAeS,GAFf,uBAE1BtB,EAF0B,EAE1BA,KAF0B,SAG5BO,aAAagB,QAAQ,kBAAmBvB,EAAKS,OAHjB,OAIlCZ,EAASxF,EAAQ2F,IACXS,EAAQT,EAAKS,MACnBvB,EAAOsC,KAAO,CAACf,SACfvB,EAAOkC,UACPlC,EAAO8B,KAAK,YAAahB,EAAK9E,IARI,kDAUlCwE,QAAQ+B,MAAR,MACA5B,EAASxF,EAAQ,CAAEoH,MAAO,KAAMC,SAAS1B,KAAKyB,OAAS,kBAXrB,0DAAjB,sDIoHN4D,CAAM/D,QAKNF,EA1GD,SAACO,GACb,IAAMC,EAAUC,cACRvH,EAAgBqH,EAAhBrH,KAAM+K,EAAU1D,EAAV0D,MACRC,EAAUzB,KAEV0B,EAAW,uCAAG,WAAOrD,GAAP,iBAAA7B,EAAA,6DAClB6B,EAAMC,iBACA3E,EAAW0E,EAAME,OAAO5E,SAAS6E,MACjCE,EAAWL,EAAME,OAAOG,SAASF,MAHrB,SAKZgD,EAAM,CAAE7H,WAAU+E,aALN,2CAAH,sDAQjB,OAAIjI,EAAKY,GACA,eAAC,IAAD,CAAUuH,GAAG,UAIpB,gBAACC,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,SAAS4C,UAAWF,EAAQvB,KAApD,UAEE,eAACrB,GAAA,EAAD,CAAMI,MAAI,EAAC2C,IAAI,EAAOC,IAAI,EAAOC,GAAI,EAAGC,GAAI,EAAGJ,UAAWF,EAAQlB,QAAlE,SACE,gBAACvB,GAAA,EAAD,CAAK2C,UAAWF,EAAQX,eAAxB,UACE,sBAAKkB,IAAKC,GAAQC,IAAI,cACpBP,UAAWF,EAAQ/G,SACrB,gBAACwE,GAAA,EAAD,CAAYY,QAAQ,KAAK6B,UAAWF,EAAQ/G,OAA5C,iCACsB,wBADtB,4BAMJ,eAACmE,GAAA,EAAD,CAAMI,MAAI,EAAC2C,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAtC,SAEA,gBAAC/C,GAAA,EAAD,CAAK2C,UAAWF,EAAQJ,MAAxB,UAEE,gBAACxC,GAAA,EAAD,CAAMC,WAAS,EAACoC,eAAe,WAAWD,WAAW,SAASa,GAAI,GAAlE,UACE,eAAC5C,GAAA,EAAD,CAAYyC,UAAWF,EAAQnB,QAA/B,+BACA,eAACnB,GAAA,EAAD,CAAQC,QAAS,kBAAMrB,EAAQjG,KAAK,cAClC6J,UAAWF,EAAQnB,QACnBc,MAAM,UAAUrB,KAAK,QAFvB,yBAKF,uBAAMV,SAAUqC,EAAaC,UAAWF,EAAQF,KAAhD,SACE,gBAAC1C,GAAA,EAAD,CAAMC,WAAS,EAACgD,GAAI,EAApB,UAEE,eAAC5C,GAAA,EAAD,CAAYY,QAAQ,KAAKf,QAAQ,aAAa4C,UAAWF,EAAQnB,QAAjE,2BAEA,gBAACzB,GAAA,EAAD,CAAMC,WAAS,EAACoC,eAAe,SAASY,GAAI,GAA5C,UACE,eAACxC,GAAA,EAAD,CAAac,OAAO,SAASV,UAAQ,EAACyC,WAAS,EAA/C,SACE,eAAC5C,GAAA,EAAD,CACE6B,MAAM,UACNhB,OAAO,SACP,aAAW,WACXZ,MAAM,WACNC,KAAK,WACL/I,KAAK,WAIT,eAAC4I,GAAA,EAAD,CAAac,OAAO,SAASV,UAAQ,EAACyC,WAAS,EAA/C,SACE,eAAC5C,GAAA,EAAD,CACE6B,MAAM,UACNhB,OAAO,SACPZ,MAAM,WACN,aAAW,WACX9I,KAAK,WACL+I,KAAK,WACL2C,WAAY,CAAEC,aACZ,eAACC,GAAA,EAAD,CAAgBC,SAAS,MAAzB,SACE,eAACpD,GAAA,EAAD,CAAQiC,MAAM,UAAd,+BAOV,eAACvC,GAAA,EAAD,CAAMC,WAAS,EAACG,MAAI,EAACiC,eAAe,SAASY,GAAI,GAAjD,SACE,eAAC3C,GAAA,EAAD,CAAQzI,KAAK,SAASoJ,QAAQ,YAAYC,KAAK,QAAQqB,MAAM,UAC3DO,UAAWF,EAAQ/G,OADrB,qC,sDCzIRsF,GAAYC,cAAW,SAAC5F,GAAD,MAAY,CACvC6F,KAAM,CACJa,QAAS,OACTG,eAAgB,gBAChBI,WAAY,GACZkB,SAAU,GAEZ7I,SAAU,CACRkB,WAAY,OACZD,eAAgB,IAElB6H,YAAa,CACXhI,SAAU,GACV2G,MAAO,UACPxG,eAAgB,KAElB8H,eAAgB,CACdjI,SAAU,GACV2G,MAAO,QACPxG,eAAgB,IAChBC,WAAY,QAEd8H,MAAO,GAGPC,aAAc,CACZzC,OAAQ,GACRS,MAAO,GACPiC,gBAAiB,UACjBC,YAAa,GACb1B,MAAO,QACP3G,SAAU,GACVG,eAAgB,GAChBC,WAAY,OACZkG,QAAS,OACTE,WAAY,SACZC,eAAgB,SAChB6B,aAAc,QAkDHC,GA9CK,SAAClF,GACnB,IAAM2D,EAAUzB,KAER3C,EAAiBS,EAAjBT,aACA5F,EAAiC4F,EAAjC5F,kBAAmBF,EAAc8F,EAAd9F,UAE3B,EAA4C0G,mBAAS,IAArD,mBAAOjG,EAAP,KAAuBiL,EAAvB,KAkBA,OALAC,qBAAU,WACY7F,EAAa7F,SAXxBG,KAAI,SAAAT,GAKT,OAJGA,EAAQgB,MAAQhB,EAAQiM,WAAa5L,EAAUF,GAGlD4L,EAAkBjL,GAFlBiL,GAAkB,SAAAG,GAAY,OAAIA,EAAelM,EAAQG,MAGlDW,OAOV,CAACP,IAIF,eAACuH,GAAA,EAAD,CAAK2C,UAAWF,EAAQvB,KACtBd,QAAS,kBAAM6D,EAAkB,KADnC,SAEE,gBAACjE,GAAA,EAAD,CAAK2C,UAAWF,EAAQvB,KAAxB,UACE,gBAAClB,GAAA,EAAD,WACE,eAACE,GAAA,EAAD,CAAYyC,UAAWF,EAAQ9H,SAA/B,SACGpC,EAAUoC,WAEb,eAACuF,GAAA,EAAD,CAAYyC,UAAW3J,EAAeqL,OAAS,EAAI5B,EAAQiB,eAAiBjB,EAAQgB,YAApF,SACGhL,OAGHO,EAAeqL,OAAS,GACxB,uBACE1B,UAAWF,EAAQmB,aADrB,SAEE5K,EAAeqL,e,oBC7ErBrD,GAAYC,cAAW,iBAAO,CAClCC,KAAM,CACJC,OAAQ,GACRmD,UAAW,GACXhC,WAAY,EACZP,QAAS,OACTE,WAAY,UAEdsC,aAAc,CACZxC,QAAS,OACTG,eAAgB,gBAChBD,WAAY,SACZuB,SAAU,GAEZ7I,SAAU,CACRiB,eAAgB,IAChBH,SAAU,GACVI,WAAY,OACZyG,WAAY,IAEdkC,SAAU,CACRpC,MAAO,UACP0B,YAAa,GACb3B,QAAS,QA0BE5D,gBANS,SAACzG,GACvB,MAAO,CACLL,KAAMK,EAAML,QAID8G,EAtBK,SAACO,GACnB,IAAM2D,EAAUzB,KAEVvJ,EAAOqH,EAAMrH,MAAQ,GAE3B,OACE,gBAACuI,GAAA,EAAD,CAAK2C,UAAWF,EAAQvB,KAAxB,UACE,eAACuD,GAAD,CAAaC,SAAUjN,EAAKiN,SAAUrL,QAAQ,IAC9C,gBAAC2G,GAAA,EAAD,CAAK2C,UAAWF,EAAQ8B,aAAxB,UACE,eAACrE,GAAA,EAAD,CAAYyC,UAAWF,EAAQ9H,SAA/B,SAA0ClD,EAAKkD,WAC/C,eAAC,KAAD,CAAe8H,QAAS,CAAEvB,KAAMuB,EAAQ+B,qB,+BClB1CG,G,+MACJC,aAAe,SAACvF,GACdA,EAAMC,kB,6CAGR,WACE,IAAQmD,EAAYoC,KAAK/F,MAAjB2D,QACR,OACE,uBAAMpC,SAAUwE,KAAKD,aAArB,SACE,eAACtE,GAAA,EAAD,CAAa6C,WAAS,EAAC2B,aAAW,EAAlC,SACE,eAACC,GAAA,EAAD,CACEtE,KAAK,SACLuE,SAAUH,KAAK/F,MAAMmG,aACrBxC,QAAS,CAAEvB,KAAMuB,EAAQyC,YAAalJ,MAAOyG,EAAQzG,OACrDmJ,kBAAgB,EAChBC,YAAY,SACZC,eACE,eAAC/B,GAAA,EAAD,CAAgBC,SAAS,QAAzB,SACE,eAAC,KAAD,gB,GAlBK+B,aA4BNC,gBAjDA,CACbL,YAAa,CACX/D,OAAQ,GACRqE,WAAY,UACZzB,aAAc,EACdtI,SAAU,GACVI,WAAY,OACZuG,MAAO,UACPxG,cAAe,EACfmG,QAAS,OACTG,eAAgB,SAChBuD,aAAc,IAEhBzJ,MAAO,CACL,iBAAkB,CAChBoG,MAAO,UACPD,QAAS,KAiCAoD,CAAmBZ,IChD5B3D,GAAYC,cAAW,iBAAO,CAClCC,KAAM,CACJwE,YAAa,GACbC,aAAc,GACdnC,SAAU,GAEZoC,MAAO,CACLnK,SAAU,GACVG,eAAgB,IAChBC,WAAY,OACZyI,UAAW,GACXmB,aAAc,QA6BHlH,gBANS,SAACzG,GACvB,MAAO,CACLyC,cAAezC,EAAMyC,iBAIVgE,EAzBC,SAACO,GACf,IAAM2D,EAAUzB,KACVzG,EAAgBuE,EAAMvE,eAAiB,GACrC0K,EAA8BnG,EAA9BmG,aAAcY,EAAgB/G,EAAhB+G,WAEtB,OACE,gBAAC7F,GAAA,EAAD,CAAK2C,UAAWF,EAAQvB,KAAxB,UACE,eAAC,GAAD,IACA,eAAChB,GAAA,EAAD,CAAYyC,UAAWF,EAAQmD,MAA/B,mBACA,eAAC,GAAD,CAAQX,aAAcA,IACrB1K,EACEC,QAAO,SAAC6D,GAAD,OAAkBA,EAAa9F,UAAUoC,SAASmL,SAASD,MAClElN,KAAI,SAAC0F,GACJ,OAAO,eAAC,GAAD,CAAMA,aAAcA,GAAmBA,EAAa9F,UAAUoC,mBCOhE4D,eAAQ,MAXI,SAACvB,GAC1B,MAAO,CACL+I,YAAa,SAACpL,GTmGS,IAACkL,ESlGtB7I,GTkGsB6I,ESlGDlL,ETkGA,uCAAgB,WAAOqC,GAAP,iBAAAQ,EAAA,+EAEhBJ,IAAM4I,IAAN,qBAAwBH,IAFR,gBAE/B1I,EAF+B,EAE/BA,KACRH,ELlFK,CACLtF,KAAMwC,EACNV,MKgF0B2D,IAHa,gDAKvCN,QAAQ+B,MAAR,MALuC,yDAAhB,yDShGvBqH,mBAAoB,WAClBjJ,EduBG,CACLtF,KAAMyC,QcnBKoE,EAnCU,SAACO,GACxB,IAAQiH,EAAoCjH,EAApCiH,YAAaE,EAAuBnH,EAAvBmH,mBAErB,EAAoChH,mBAAS,IAA7C,mBAAO4G,EAAP,KAAmBK,EAAnB,KAEMjB,EAAY,uCAAG,WAAO5F,GAAP,SAAA7B,EAAA,yDACQ,KAAvB6B,EAAME,OAAOC,MADE,uBAGjByG,IACAC,EAAc,IAJG,8BAOfL,EAAWC,SAASzG,EAAME,OAAOC,OAPlB,uBASjB0G,EAAc7G,EAAME,OAAOC,OATV,0CAYbuG,EAAY1G,EAAME,OAAOC,OAZZ,OAanB0G,EAAc7G,EAAME,OAAOC,OAbR,4CAAH,sDAgBlB,OAAO,eAAC,GAAD,CAASyF,aAAcA,EAAcY,WAAYA,OC8B3CtH,eAAQ,MARI,SAACvB,GAC1B,MAAO,CACLmJ,cAAe,SAAC9N,GACd2E,EdjDG,CACLtF,KAAMgD,EACNC,Sc+CyBtC,QAKdkG,CAAkCgH,aAhDlC,CACbrE,KAAM,CACJ6C,aAAc,EACd5C,OAAQ,GACRiF,UAAW,qCACXX,aAAc,GACd1D,QAAS,OACTE,WAAY,SACZ,UAAW,CACToE,OAAQ,UAuCmCd,EAlCpC,SAACzG,GACZ,IAAQ2D,EAAY3D,EAAZ2D,QACFlK,EAAYuG,EAAMT,aAAa9F,UAE/B+N,EAAW,uCAAG,WAAOjI,GAAP,SAAAb,EAAA,sEACZsB,EAAMqH,cAAc9H,EAAa9F,UAAUoC,UAD/B,2CAAH,sDAKf,OACE,gBAACqF,GAAA,EAAD,CACEI,QAAS,kBAAMkG,EAAYxH,EAAMT,eACjCsE,UAAWF,EAAQvB,KAFrB,UAIE,eAACuD,GAAD,CACEC,SAAUnM,EAAUmM,SACpB/J,SAAUpC,EAAUoC,SACpBtB,OAAQd,EAAUc,OAClBkI,SAAS,IAEX,eAAC,GAAD,CAAalD,aAAcS,EAAMT,sB,oBCvCnC2C,GAAYC,cAAW,iBAAO,CAClCsF,WAAY,CACVpF,OAAQ,GACRS,MAAO,IAET+B,MAAO,CACLxC,OAAQ,GACRS,MAAO,GACPmC,aAAc,MACdyC,OAAQ,kBACR3C,gBAAiB,WAEnBxK,OAAQ,CACNwK,gBAAiB,WAEnBtC,QAAS,CACPe,WAAY,QAqBDmE,GAjBI,SAAC3H,GAClB,IAAM2D,EAAUzB,KACRO,EAAwCzC,EAAxCyC,QAAS5G,EAA+BmE,EAA/BnE,SAAU+J,EAAqB5F,EAArB4F,SAAUrL,EAAWyF,EAAXzF,OAErC,OACE,eAAC2G,GAAA,EAAD,CAAK2C,UAAWpB,EAAUkB,EAAQlB,QAAU,GAA5C,SACE,eAACmF,GAAA,EAAD,CACEjE,QAAS,CAAEkB,MAAM,GAAD,OAAKlB,EAAQkB,MAAb,YAAsBtK,GAAUoJ,EAAQpJ,SACxDyH,QAAQ,MACR6F,aAAc,CAAEC,WAAY,QAASC,SAAU,UAC/CC,QAAQ,SAJV,SAKE,eAACC,GAAA,EAAD,CAAQ7D,IAAKvI,EAAUqI,IAAK0B,EAAU/B,UAAWF,EAAQ8D,kBC/B3DvF,GAAYC,cAAW,iBAAO,CAClCC,KAAM,CACJa,QAAS,OACTC,cAAe,SACfC,WAAY,YAEd+E,KAAM,CACJvL,SAAU,GACV2G,MAAO,UACPvG,WAAY,OACZ4J,aAAc,GAEhB/M,KAAM,CACJ+C,SAAU,GACV2G,MAAO,UACPxG,eAAgB,GAChByF,QAAS,EACTxF,WAAY,QAEdoH,OAAQ,CACNuC,WAAY,UACZzB,aAAc,oBAEhBkD,WAAY,CACVlF,QAAS,OACTC,cAAe,SACfC,WAAY,YAEdiF,YAAa,CACXnF,QAAS,OACTC,cAAe,SACfC,WAAY,aACZK,WAAY,IAEd6E,WAAY,CACVhG,OAAQ,GACRS,MAAO,GACP0C,UAAW,OAyBA8C,GArBM,SAACtI,GACpB,IAAM2D,EAAUzB,KACRqG,EAA+CvI,EAA/CuI,KAAM3O,EAAyCoG,EAAzCpG,KAAMH,EAAmCuG,EAAnCvG,UAAWW,EAAwB4F,EAAxB5F,KAAMoO,EAAkBxI,EAAlBwI,cAErC,OACE,gBAACtH,GAAA,EAAD,CAAK2C,UAAWF,EAAQvB,KAAxB,UACE,eAAChB,GAAA,EAAD,CAAYyC,UAAWF,EAAQuE,KAA/B,SAAsCK,IACtC,eAACrH,GAAA,EAAD,CAAK2C,UAAWF,EAAQQ,OAAxB,SACE,eAAC/C,GAAA,EAAD,CAAYyC,UAAWF,EAAQ/J,KAA/B,SAAsCA,MAEtCQ,GAAQoO,EAAc5O,OAASA,EAC/B,eAACsH,GAAA,EAAD,CAAK2C,UAAWF,EAAQyE,YAAxB,SACE,eAACH,GAAA,EAAD,CAAQpE,UAAWF,EAAQ0E,WACzBnE,IAAKzK,EAAUmM,aAGnB,OCzDF1D,GAAYC,cAAW,iBAAO,CAClCC,KAAM,CACJa,QAAS,QAEXwF,OAAQ,CACNpG,OAAQ,GACRS,MAAO,GACPkC,YAAa,GACbQ,UAAW,GAEbkD,aAAc,CACZ/L,SAAU,GACV2G,MAAO,UACPvG,WAAY,OACZ4J,aAAc,GAEhBxC,OAAQ,CACNzB,gBAAiB,oDACjBuC,aAAc,oBAEhBrL,KAAM,CACJ+C,SAAU,GACVI,WAAY,OACZuG,MAAO,UACPxG,eAAgB,GAChByF,QAAS,OAsBEoG,GAlBS,SAAC3I,GACvB,IAAM2D,EAAUzB,KACRtI,EAA0BoG,EAA1BpG,KAAM2O,EAAoBvI,EAApBuI,KAAM9O,EAAcuG,EAAdvG,UACpB,OACE,gBAACyH,GAAA,EAAD,CAAK2C,UAAWF,EAAQvB,KAAxB,UACE,eAAC6F,GAAA,EAAD,CAAQ7D,IAAK3K,EAAUoC,SAAUqI,IAAKzK,EAAUmM,SAAU/B,UAAWF,EAAQ8E,SAC7E,gBAACvH,GAAA,EAAD,WACE,gBAACE,GAAA,EAAD,CAAYyC,UAAWF,EAAQ+E,aAA/B,UACGjP,EAAUoC,SADb,IACwB0M,KAExB,eAACrH,GAAA,EAAD,CAAK2C,UAAWF,EAAQQ,OAAxB,SACE,eAAC/C,GAAA,EAAD,CAAYyC,UAAWF,EAAQ/J,KAA/B,SAAsCA,aCtC1CsI,GAAYC,cAAW,iBAAO,CAClCC,KAAM,CACJa,QAAS,OACTyB,SAAU,EACVxB,cAAe,UAEjB0F,cAAe,CACbpF,WAAY,GACZwB,YAAa,GACb/B,QAAS,OACTC,cAAe,SACfwB,SAAU,EACVtB,eAAgB,qBAkDL3D,gBAXS,SAACzG,GACvB,MAAO,CACLL,KAAMK,EAAML,KACZ4G,aACEvG,EAAMyC,eACNzC,EAAMyC,cAAcoN,MAClB,SAACtJ,GAAD,OAAkBA,EAAa9F,UAAUoC,WAAa7C,EAAMiD,yBAK5B,KAAzBwD,EA9CI,SAACO,GAElB,IAAM2D,EAAUzB,KACRvJ,EAASqH,EAATrH,KACF4G,EAAeS,EAAMT,cAAgB,GAG3C,OACE,eAAC2B,GAAA,EAAD,CAAK2C,UAAWF,EAAQvB,KAAxB,SACG7C,EAAa9F,WACZ,uCACE,eAAC,GAAD,CACEoC,SAAU0D,EAAa9F,UAAUoC,SACjCtB,OAAQgF,EAAa9F,UAAUc,SAAU,IAE3C,gBAAC2G,GAAA,EAAD,CAAK2C,UAAWF,EAAQiF,cAAxB,UACE,eAAC,GAAD,CACErJ,aAAcA,EACd7F,SAAU6F,EAAa7F,SACvBD,UAAW8F,EAAa9F,UACxBqP,OAAQnQ,EAAKY,GACbZ,KAAMA,IAER,eAAC,GAAD,CACEc,UAAW8F,EAAa9F,UACxBD,eAAgB+F,EAAahG,GAC7BZ,KAAMA,eC7BdoQ,G,oDACJ,WAAY/I,GAAQ,IAAD,+BACjB,cAAMA,IAMRmG,aAAe,SAAC5F,GACd,EAAKyI,SAAS,CACZpP,KAAM2G,EAAME,OAAOC,SATJ,EAanBoF,aAbmB,uCAaJ,WAAOvF,GAAP,eAAA7B,EAAA,6DACb6B,EAAMC,iBAEAyI,EAAU,CACdrP,KAAM2G,EAAME,OAAO7G,KAAK8G,MACxB3F,YAAa,EAAKiF,MAAMvG,UAAUF,GAClCC,eAAgB,EAAKwG,MAAMxG,eAC3BH,OAAQ,EAAK2G,MAAMxG,eAAiB,KAAO,EAAKwG,MAAMrH,MAP3C,SASP,EAAKqH,MAAMkJ,YAAYD,GAThB,OAUb,EAAKD,SAAS,CACZpP,KAAM,KAXK,2CAbI,sDAEjB,EAAKZ,MAAQ,CACXY,KAAM,IAHS,E,2CA4BnB,WACE,IAAQ+J,EAAYoC,KAAK/F,MAAjB2D,QACR,OACE,uBAAME,UAAWF,EAAQvB,KAAMb,SAAUwE,KAAKD,aAA9C,SACE,eAACtE,GAAA,EAAD,CAAa6C,WAAS,EAAC2B,aAAW,EAAlC,SACE,eAACC,GAAA,EAAD,CACEtC,QAAS,CAAEvB,KAAMuB,EAAQzG,OACzBmJ,kBAAgB,EAChBC,YAAY,oBACZ5F,MAAOqF,KAAK/M,MAAMY,KAClB+H,KAAK,OACLuE,SAAUH,KAAKI,uB,GAxCPK,aA+DL/G,gBAfS,SAACzG,GACvB,MAAO,CACLL,KAAMK,EAAML,KACZ8C,cAAezC,EAAMyC,kBAIE,SAACyC,GAC1B,MAAO,CACLgL,YAAa,SAAC9P,Gf2BS,IAAC6F,Ee1BtBf,Gf0BsBe,Ee1BD7F,Ef0BA,uCAAU,WAAO8E,GAAP,eAAAQ,EAAA,+EAEdM,GAAYC,GAFE,OAE3BZ,EAF2B,OAI5BY,EAAKzF,eAGR0E,EAAS1C,EAAc6C,EAAKjF,UAF5B8E,GLrC0BnD,EKqCDkE,EAAKlE,YLrCSY,EKqCI0C,EAAKjF,QLpC7C,CACLR,KAAM0C,EACNnC,QAAS,CAAE4B,cAAaY,iBKuCxBwD,GAAYd,EAAMY,GAVe,gDAYjClB,QAAQ+B,MAAR,MAZiC,kCLhCN,IAAC/E,EAAaY,IKgCR,oBAAV,4DerBZ8D,CAGbgH,aA/Ea,CACbrE,KAAM,CACJ+G,YAAa,WACb3D,UAAW,IAEbtI,MAAO,CACLmF,OAAQ,GACR0C,gBAAiB,UACjBE,aAAc,EACd0B,aAAc,KAsEhBF,CAAmBsC,KChFf7G,GAAYC,cAAW,SAAC5F,GAAD,MAAY,CACvC6F,KAAM,CACJa,QAAS,OACTE,WAAY,SACZC,eAAgB,gBAChBf,OAAQ,GACRsE,aAAc,GACdW,UAAW,sCAEb8B,QAAS,CACPnG,QAAS,OACTE,WAAY,SACZK,WAAY,IAEd3H,SAAU,CACRc,SAAU,GACVG,eAAgB,IAChBC,WAAY,OACZiI,YAAa,IAEfqE,WAAY,CACV1M,SAAU,GACV2G,MAAO,UACPxG,eAAgB,KAElBwM,UAAW,CACTjH,OAAQ,EACRS,MAAO,EACPmC,aAAc,MACdD,YAAa,EACbD,gBAAiB,WAEnBxK,OAAQ,CACNmM,WAAY,WAEdhB,SAAU,CACRpC,MAAO,UACP0B,YAAa,GACb3B,QAAS,QAoBEkG,GAhBA,SAACvJ,GACd,IAAM2D,EAAUzB,KACRrG,EAAqBmE,EAArBnE,SAAUtB,EAAWyF,EAAXzF,OAElB,OACE,gBAAC2G,GAAA,EAAD,CAAK2C,UAAWF,EAAQvB,KAAxB,UACE,gBAAClB,GAAA,EAAD,CAAK2C,UAAWF,EAAQyF,QAAxB,UACE,eAAChI,GAAA,EAAD,CAAYyC,UAAWF,EAAQ9H,SAA/B,SAA0CA,IAC1C,eAACqF,GAAA,EAAD,CAAK2C,UAAS,UAAKF,EAAQ2F,UAAb,YAA0B3F,EAAQpJ,GAAU,aAC1D,eAAC6G,GAAA,EAAD,CAAYyC,UAAWF,EAAQ0F,WAA/B,SAA4C9O,EAAS,SAAW,eAElE,eAAC,KAAD,CAAeoJ,QAAS,CAAEvB,KAAMuB,EAAQ+B,gB,qBChB/B8D,GAnCE,SAACxJ,GAChB,IAAQT,EAA8CS,EAA9CT,aAAc7F,EAAgCsG,EAAhCtG,SAAUD,EAAsBuG,EAAtBvG,UAAWqP,EAAW9I,EAAX8I,OAErCW,EAAgB/P,EAASA,EAAS6L,OAAQ,GAEhD,EAA0CpF,mBAASsJ,GAAnD,mBAAOjB,EAAP,KAAsBkB,EAAtB,KAEMC,EAAwB,CAACF,GAO/B,OALArE,qBAAU,WACR9F,GAAwBC,GACxBmK,EAAiBC,EAAsBA,EAAsBpE,OAAQ,MACpE,CAAChG,EAAckK,IAGhB,eAACvI,GAAA,EAAD,UACGxH,EAASG,KAAI,SAACT,GACb,IAAMmP,EAAOqB,KAAOxQ,EAAQyQ,WAAWC,OAAO,QAM9C,OAJI1Q,EAAQgB,MAAQhB,EAAQiM,WAAayD,GACvCa,EAAsB3P,KAAKZ,GAGtBA,EAAQiM,WAAayD,EAC1B,eAAC,GAAD,CAA+BlP,KAAMR,EAAQQ,KAAM2O,KAAMA,EAAM9O,UAAWA,EACvEgQ,cAAeA,EAAerP,KAAMhB,EAAQgB,KAAMoO,cAAeA,GADjDpP,EAAQG,IAG3B,eAAC,GAAD,CAAkCK,KAAMR,EAAQQ,KAAM2O,KAAMA,EAAM9O,UAAWA,EAC3E+O,cAAeA,GADKpP,EAAQG,UClBlCwQ,G,oDACJ,WAAY/J,GAAQ,IAAD,+BACjB,cAAMA,IAkBRgK,aAnBmB,sBAmBJ,sBAAAtL,EAAA,sEACP,EAAKsB,MAAMiK,OAAO,EAAKjK,MAAMrH,KAAKY,IAD3B,2CAjBb,EAAKP,MAAQ,CACXkR,YAAY,GAHG,E,uDAOnB,SAAmBC,GACbpE,KAAK/F,MAAMrH,KAAKY,KAAO4Q,EAAUxR,KAAKY,IACxCwM,KAAKiD,SAAS,CACZkB,YAAY,M,+BAKlB,WACEnE,KAAK/F,MAAMoK,uB,oBAOb,WACE,IAAQzG,EAAYoC,KAAK/F,MAAjB2D,QACR,OAAKoC,KAAK/F,MAAMrH,KAAKY,GAMnB,uCAEE,eAAC8H,GAAA,EAAD,CAAQwC,UAAWF,EAAQsG,OAAQ3I,QAASyE,KAAKiE,aAAjD,oBAGA,gBAACjJ,GAAA,EAAD,CAAMC,WAAS,EAACqJ,UAAU,OAAOxG,UAAWF,EAAQvB,KAApD,UACE,eAACkI,GAAA,EAAD,IACA,eAAC,GAAD,IACA,eAAC,GAAD,UAZAvE,KAAK/M,MAAMkR,WAAmB,eAAC,IAAD,CAAUpJ,GAAG,WACxC,eAAC,IAAD,CAAUA,GAAG,kB,GA7BP0F,aAkEJ/G,gBAnBS,SAACzG,GACvB,MAAO,CACLL,KAAMK,EAAML,KACZ8C,cAAezC,EAAMyC,kBAIE,SAACyC,GAC1B,MAAO,CACL+L,OAAQ,SAAC1Q,GACP2E,ElBRgB,SAAC3E,GAAD,8CAAQ,WAAO2E,GAAP,SAAAQ,EAAA,+EAEpBJ,IAAMiM,OAAO,gBAFO,uBAGpB3L,aAAa4L,WAAW,mBAHJ,OAI1BtM,EAASxF,EAAQ,KACjB6E,EAAO8B,KAAK,SAAU9F,GALI,gDAO1BwE,QAAQ+B,MAAR,MAP0B,yDAAR,sDkBQPmK,CAAO1Q,IAChB2E,ErB/DG,CACLtF,KAAMkD,KqBgENsO,mBAAoB,WAClBlM,ElBC4B,uCAAM,WAAOA,GAAP,iBAAAQ,EAAA,+EAEbJ,IAAM4I,IAAI,sBAFG,gBAE5B7I,EAF4B,EAE5BA,KACRH,EL1DK,CACLtF,KAAMoC,EACNS,cKwD0B4C,IAHU,gDAKpCN,QAAQ+B,MAAR,MALoC,yDAAN,2DkBInBL,CAGbgH,aA3Ea,CACbrE,KAAM,CACJC,OAAQ,SAyEVoE,CAAmBsD,K,+BChFf7H,GAAYC,cAAW,SAAC5F,GAAD,MAAY,CACvCkO,SAAU,CACR1F,gBAAiB,MACjBhI,WAAY,QAEd2N,KAAM,CACJpH,MAAO,aA8BIqH,GA1BO,SAAC3K,GACrB,IAAM2D,EAAUzB,KAChB,OACE,eAAC0I,GAAA,EAAD,CACEC,KAAM7K,EAAM8K,aACZC,QAAS,kBAAM/K,EAAMgL,iBAAgB,IACrC5R,QAAS4G,EAAMiL,cAAgB,4CAC/BhS,OACE,eAAC,IAAMiS,SAAP,UACE,eAAC7J,GAAA,EAAD,CACEwC,UAAWF,EAAQ+G,KACnBzI,KAAK,QACLX,QAAS,kBAAMtB,EAAMgL,iBAAgB,IAHvC,SAIE,eAAC,KAAD,CAAO1H,MAAM,kBAInB6H,aAAc,CACZxH,QAAS,CACPvB,KAAMuB,EAAQ8G,cCoCTW,eAAW3L,aAdF,SAACzG,GACvB,MAAO,CACLL,KAAMK,EAAML,SAIW,SAACuF,GAC1B,MAAO,CACLmN,UADK,WAEHnN,EpB9CmB,uCAAM,WAAOA,GAAP,iBAAAQ,EAAA,6DAC7BR,EAASrF,GAAkB,IADE,kBAGJyF,IAAM4I,IAAI,cAHN,gBAGnB7I,EAHmB,EAGnBA,KACRH,EAASxF,EAAQ2F,IACjBd,EAAOkC,UACHpB,EAAK9E,IACPgE,EAAO8B,KAAK,YAAahB,EAAK9E,IAPL,kDAU3BwE,QAAQ+B,MAAR,MAV2B,yBAY3B5B,EAASrF,GAAkB,IAZA,6EAAN,2DoBmDC4G,EA9DX,SAACO,GACd,IAAQrH,EAAoBqH,EAApBrH,KAAM0S,EAAcrL,EAAdqL,UACd,EAAwClL,mBAAS,IAAjD,mBAAO8K,EAAP,KAAqBK,EAArB,KACA,EAAwCnL,oBAAS,GAAjD,mBAAO2K,EAAP,KAAqBE,EAArB,KAkBA,OAhBA5F,qBAAU,WACRiG,MACC,CAACA,IAEJjG,qBAAU,WACJzM,EAAKmH,QAEmB,kBAAfnH,EAAKmH,MACdwL,EAAgB3S,EAAKmH,OAErBwL,EAAgB,2CAElBN,GAAgB,MAEjB,CAACrS,EAAKmH,QAELE,EAAMrH,KAAK4S,eACN,8CAIP,uCACGT,GACC,eAAC,GAAD,CACEE,gBAAiBA,EACjBC,aAAcA,EACdH,aAAcA,IAGlB,gBAAC,IAAD,WACE,eAAC,IAAD,CAAOU,KAAK,SAASnB,UAAWoB,KAChC,eAAC,IAAD,CAAOD,KAAK,YAAYnB,UAAWqB,KACnC,eAAC,IAAD,CACEC,OAAK,EACLH,KAAK,IACLI,OAAQ,SAAC5L,GAAD,aAAY,UAAAA,EAAMrH,YAAN,eAAYY,IAAK,eAAC,GAAD,IAAW,eAACmS,GAAD,OAElD,eAAC,IAAD,CAAOF,KAAK,QAAQnB,UAAWN,eC7BxB8B,OAZf,WACE,OACE,eAAC,IAAD,CAAU5N,MAAOA,EAAjB,SACE,eAAC,IAAD,CAAkB1B,MAAOA,EAAzB,SACE,eAAC,IAAD,UACE,eAAC,GAAD,WCFUuP,QACW,cAA7BrO,OAAOC,SAASqO,UAEe,UAA7BtO,OAAOC,SAASqO,UAEhBtO,OAAOC,SAASqO,SAASC,MACvB,2DCZNC,IAASL,OAAO,eAAC,GAAD,IAASM,SAASC,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.fed24ee6.chunk.js","sourcesContent":["// ACTIONS\r\n\r\nconst GET_USER = \"GET_USER\";\r\nconst SET_FETCHING_STATUS = \"SET_FETCHING_STATUS\";\r\n\r\n// ACTION CREATORS\r\n\r\nexport const gotUser = (user) => {\r\n  return {\r\n    type: GET_USER,\r\n    user\r\n  };\r\n};\r\n\r\nexport const setFetchingStatus = (isFetching) => ({\r\n  type: SET_FETCHING_STATUS,\r\n  isFetching\r\n});\r\n\r\n// REDUCER\r\n\r\nconst reducer = (state = { isFetching: true }, action) => {\r\n  switch (action.type) {\r\n    case GET_USER:\r\n      return action.user;\r\n    case SET_FETCHING_STATUS:\r\n      return {\r\n        ...state,\r\n        isFetching: action.isFetching\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","export const addMessageToStore = (state, payload) => {\r\n  const { message, sender } = payload;\r\n  // if sender isn't null, that means the message needs to be put in a brand new convo\r\n  if (sender !== null) {\r\n    const newConvo = {\r\n      id: message.conversationId,\r\n      otherUser: sender,\r\n      messages: [message],\r\n    };\r\n    newConvo.latestMessageText = message.text;\r\n    return [newConvo, ...state];\r\n  }\r\n  return state.map((convo) => {\r\n    if (convo.id === message.conversationId) {\r\n      const convoCopy = { ...convo };\r\n      convoCopy.messages.push(message);\r\n      convoCopy.latestMessageText = message.text;\r\n\r\n      return convoCopy;\r\n    } else {\r\n      return convo;\r\n    }\r\n  });\r\n};\r\n\r\nexport const addUnreadMessagesToStore = (state) => {\r\n  const unreadMessages = {};\r\n\r\n  state.forEach((convo) => {\r\n    if (!convo.message.read) {\r\n      unreadMessages.push(convo.message)\r\n    }\r\n  });\r\n  return unreadMessages;\r\n}\r\n\r\nexport const addOnlineUserToStore = (state, id, socketId) => {\r\n  return state.map((convo) => {\r\n    if (convo.otherUser.id === id) {\r\n      const convoCopy = { ...convo };\r\n      convoCopy.otherUser.online = true;\r\n      convoCopy.otherUser.socketId = socketId;\r\n      return convoCopy;\r\n    } else {\r\n      return convo;\r\n    }\r\n  });\r\n};\r\n\r\nexport const removeOfflineUserFromStore = (state, user) => {\r\n  return state.map((convo) => {\r\n    if (convo.otherUser.id === user.id) {\r\n      const convoCopy = { ...convo };\r\n      convoCopy.otherUser.online = false;\r\n      convoCopy.otherUser.socketId = \"\";\r\n      return convoCopy;\r\n    } else {\r\n      return convo;\r\n    }\r\n  });\r\n};\r\n\r\nexport const addSearchedUsersToStore = (state, users) => {\r\n  const currentUsers = {};\r\n\r\n  // make table of current users so we can lookup faster\r\n  state.forEach((convo) => {\r\n    currentUsers[convo.otherUser.id] = true;\r\n  });\r\n\r\n  const newState = [...state];\r\n  users.forEach((user) => {\r\n    // only create a fake convo if we don't already have a convo with this user\r\n    if (!currentUsers[user.id]) {\r\n      let fakeConvo = { otherUser: user, messages: [] };\r\n      newState.push(fakeConvo);\r\n    }\r\n  });\r\n\r\n  return newState;\r\n};\r\n\r\nexport const addNewConvoToStore = (state, recipientId, message) => {\r\n  return state.map((convo) => {\r\n    if (convo.otherUser.id === recipientId) {\r\n      const newConvo = { ...convo };\r\n      newConvo.id = message.conversationId;\r\n      newConvo.messages.push(message);\r\n      newConvo.latestMessageText = message.text;\r\n      return newConvo;\r\n    } else {\r\n      return convo;\r\n    }\r\n  });\r\n};\r\n","import {\r\n  addNewConvoToStore,\r\n  addOnlineUserToStore,\r\n  addSearchedUsersToStore,\r\n  removeOfflineUserFromStore,\r\n  addMessageToStore,\r\n  addUnreadMessagesToStore\r\n} from \"./utils/reducerFunctions\";\r\n\r\n// ACTIONS\r\n\r\nconst GET_CONVERSATIONS = \"GET_CONVERSATIONS\";\r\nconst SET_MESSAGE = \"SET_MESSAGE\";\r\nconst ADD_ONLINE_USER = \"ADD_ONLINE_USER\";\r\nconst REMOVE_OFFLINE_USER = \"REMOVE_OFFLINE_USER\";\r\nconst SET_SEARCHED_USERS = \"SET_SEARCHED_USERS\";\r\nconst CLEAR_SEARCHED_USERS = \"CLEAR_SEARCHED_USERS\";\r\nconst ADD_CONVERSATION = \"ADD_CONVERSATION\";\r\nconst ADD_UNREAD_MESSAGES = \"ADD_UNREAD_MESSAGES\";\r\n\r\n// ACTION CREATORS\r\n\r\nexport const gotConversations = (conversations) => {\r\n  return {\r\n    type: GET_CONVERSATIONS,\r\n    conversations,\r\n  };\r\n};\r\n\r\nexport const setNewMessage = (message, sender) => {\r\n  return {\r\n    type: SET_MESSAGE,\r\n    payload: { message, sender: sender || null },\r\n  };\r\n};\r\n\r\nexport const addOnlineUser = (id, socketId) => {\r\n  return {\r\n    type: ADD_ONLINE_USER,\r\n    id,\r\n    socketId,\r\n  };\r\n};\r\n\r\nexport const removeOfflineUser = (user) => {\r\n  return {\r\n    type: REMOVE_OFFLINE_USER,\r\n    user,\r\n  };\r\n};\r\n\r\nexport const setSearchedUsers = (users) => {\r\n  return {\r\n    type: SET_SEARCHED_USERS,\r\n    users,\r\n  };\r\n};\r\n\r\nexport const clearSearchedUsers = () => {\r\n  return {\r\n    type: CLEAR_SEARCHED_USERS,\r\n  };\r\n};\r\n\r\nexport const addUnreadMessages = (id) => {\r\n  return {\r\n    type: ADD_UNREAD_MESSAGES\r\n  }\r\n}\r\n\r\n// add new conversation when sending a new message\r\nexport const addConversation = (recipientId, newMessage) => {\r\n  return {\r\n    type: ADD_CONVERSATION,\r\n    payload: { recipientId, newMessage },\r\n  };\r\n};\r\n\r\n// REDUCER\r\n\r\nconst reducer = (state = [], action) => {\r\n  switch (action.type) {\r\n    case GET_CONVERSATIONS:\r\n      return action.conversations;\r\n    case SET_MESSAGE:\r\n      return addMessageToStore(state, action.payload);\r\n    case ADD_UNREAD_MESSAGES:\r\n      return addUnreadMessagesToStore(state);\r\n    case ADD_ONLINE_USER: {\r\n      return addOnlineUserToStore(state, action.id, action.socketId);\r\n    }\r\n    case REMOVE_OFFLINE_USER: {\r\n      return removeOfflineUserFromStore(state, action.user);\r\n    }\r\n    case SET_SEARCHED_USERS:\r\n      return addSearchedUsersToStore(state, action.users);\r\n    case CLEAR_SEARCHED_USERS:\r\n      return state.filter((convo) => convo.id);\r\n    case ADD_CONVERSATION:\r\n      return addNewConvoToStore(\r\n        state,\r\n        action.payload.recipientId,\r\n        action.payload.newMessage\r\n      );\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","const SET_ACTIVE_CHAT = \"SET_ACTIVE_CHAT\";\r\n\r\nexport const setActiveChat = (username) => {\r\n  return {\r\n    type: SET_ACTIVE_CHAT,\r\n    username\r\n  };\r\n};\r\n\r\nconst reducer = (state = \"\", action) => {\r\n  switch (action.type) {\r\n    case SET_ACTIVE_CHAT: {\r\n      return action.username;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { createStore, applyMiddleware, combineReducers } from \"redux\";\r\nimport loggerMiddleware from \"redux-logger\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\n\r\nimport user from \"./user\";\r\nimport conversations from \"./conversations\";\r\nimport activeConversation from \"./activeConversation\";\r\n\r\nconst CLEAR_ON_LOGOUT = \"CLEAR_ON_LOGOUT\";\r\n\r\nexport const clearOnLogout = () => {\r\n  return {\r\n    type: CLEAR_ON_LOGOUT\r\n  };\r\n};\r\n\r\nconst appReducer = combineReducers({\r\n  user,\r\n  conversations,\r\n  activeConversation\r\n});\r\nconst rootReducer = (state, action) => {\r\n  if (action.type === CLEAR_ON_LOGOUT) {\r\n    // set state to initial state\r\n    state = undefined;\r\n  }\r\n  return appReducer(state, action);\r\n};\r\n\r\nexport default createStore(rootReducer, applyMiddleware(thunkMiddleware, loggerMiddleware));\r\n","import { createTheme } from \"@material-ui/core/styles\";\r\n\r\nexport const theme = createTheme({\r\n  typography: {\r\n    fontFamily: \"Open Sans, sans-serif\",\r\n    fontSize: 14,\r\n    button: {\r\n      textTransform: \"none\",\r\n      letterSpacing: 0,\r\n      fontWeight: \"bold\"\r\n    }\r\n  },\r\n  overrides: {\r\n    MuiInput: {\r\n      input: {\r\n        fontWeight: \"bold\"\r\n      }\r\n    }\r\n  },\r\n  palette: {\r\n    primary: { main: \"#3A8DFF\" },\r\n    secondary: { main: \"#B0B0B0\" }\r\n  }\r\n});\r\n","import {io} from \"socket.io-client\";\r\nimport store from \"./store\";\r\nimport {\r\n  setNewMessage,\r\n  removeOfflineUser,\r\n  addOnlineUser\r\n} from \"./store/conversations\";\r\n\r\nconst socket = io(window.location.origin,\r\n  { transports: [\"polling\"] },\r\n  { reconnectionAttempts: 5 });\r\n\r\nsocket.on(\"connect\", () => {\r\n    console.log(\"connected to server!\");\r\n    console.log(socket.id)\r\n\r\n  socket.on(\"add-online-user\", (user) => {\r\n    const id = user.id;\r\n    const socketId = user.socketId;\r\n    store.dispatch(addOnlineUser(id, socketId));\r\n  });\r\n\r\n  socket.on(\"remove-offline-user\", (user) => {\r\n    store.dispatch(removeOfflineUser(user));\r\n  });\r\n  \r\n  socket.on(\"new-message\", (data) => {\r\n    store.dispatch(setNewMessage(data.message, data.sender));\r\n  });\r\n});\r\n\r\nexport default socket;\r\n","import axios from \"axios\";\r\nimport socket from \"../../socket\";\r\nimport {\r\n  gotConversations,\r\n  addConversation,\r\n  setNewMessage,\r\n  setSearchedUsers,\r\n} from \"../conversations\";\r\nimport { gotUser, setFetchingStatus } from \"../user\";\r\n\r\naxios.interceptors.request.use(async function (config) {\r\n  const token = await localStorage.getItem(\"messenger-token\");\r\n  config.headers[\"x-access-token\"] = token;\r\n\r\n  return config;\r\n});\r\n\r\n// USER THUNK CREATORS\r\n\r\nexport const fetchUser = () => async (dispatch) => {\r\n  dispatch(setFetchingStatus(true));\r\n  try {\r\n    const { data } = await axios.get(\"/auth/user\");\r\n    dispatch(gotUser(data));\r\n    socket.connect();\r\n    if (data.id) {\r\n      socket.emit(\"go-online\", data.id);\r\n    }\r\n  } catch (error) {\r\n    console.error(error);\r\n  } finally {\r\n    dispatch(setFetchingStatus(false));\r\n  }\r\n};\r\n\r\nexport const register = (credentials) => async (dispatch) => {\r\n  try {\r\n    const { data } = await axios.post(\"/auth/register\", credentials);\r\n    await localStorage.setItem(\"messenger-token\", data.token);\r\n    dispatch(gotUser(data));\r\n    const token = data.token\r\n    socket.auth = {token};\r\n    socket.connect();\r\n    socket.emit(\"go-online\", data.id);\r\n  } catch (error) {\r\n    console.error(error);\r\n    dispatch(gotUser({ error: error.response.data.error || \"Server Error\" }));\r\n  }\r\n};\r\n\r\nexport const login = (credentials) => async (dispatch) => {\r\n  try {\r\n    const { data } = await axios.post(\"/auth/login\", credentials);\r\n    await localStorage.setItem(\"messenger-token\", data.token);\r\n    dispatch(gotUser(data));\r\n    const token = data.token\r\n    socket.auth = {token};\r\n    socket.connect();\r\n    socket.emit(\"go-online\", data.id);\r\n  } catch (error) {\r\n    console.error(error);\r\n    dispatch(gotUser({ error: error.response.data.error || \"Server Error\" }));\r\n  }\r\n};\r\n\r\nexport const logout = (id) => async (dispatch) => {\r\n  try {\r\n    await axios.delete(\"/auth/logout\");\r\n    await localStorage.removeItem(\"messenger-token\");\r\n    dispatch(gotUser({}));\r\n    socket.emit(\"logout\", id);\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n};\r\n\r\n// CONVERSATIONS THUNK CREATORS\r\n\r\nexport const fetchConversations = () => async (dispatch) => {\r\n  try {\r\n    const { data } = await axios.get(\"/api/conversations\");\r\n    dispatch(gotConversations(data));\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n};\r\n\r\nconst saveMessage = async (body) => {\r\n  const { data } = await axios.post(\"/api/messages\", body);\r\n  return data;\r\n};\r\n\r\nconst sendMessage = (data, body) => {\r\n  const messageData = {\r\n    message: data.message,\r\n    recipientId: body.recipientId,\r\n    sender: data.sender,\r\n  }\r\n  socket.emit(\"new-message\", {messageData});\r\n};\r\n\r\n// message format to send: {recipientId, text, conversationId}\r\n// conversationId will be set to null if its a brand new conversation\r\nexport const postMessage = (body) => async (dispatch) => {\r\n  try {\r\n    const data = await saveMessage(body);\r\n\r\n    if (!body.conversationId) {\r\n      dispatch(addConversation(body.recipientId, data.message));\r\n    } else {\r\n      dispatch(setNewMessage(data.message));\r\n    }\r\n\r\n    sendMessage(data, body);\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n};\r\n\r\nexport const updateMessageReadStatus = async (conversation) => {\r\n  try {\r\n    const messages = conversation.messages;\r\n\r\n    const { data } = await axios.put(`/api/messages/${conversation.id}`, messages);\r\n    return data;\r\n  \r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n};\r\n\r\nexport const searchUsers = (searchTerm) => async (dispatch) => {\r\n  try {\r\n    const { data } = await axios.get(`/api/users/${searchTerm}`);\r\n    dispatch(setSearchedUsers(data));\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Redirect, useHistory } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Grid,\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  FormControl,\r\n  TextField,\r\n  FormHelperText,\r\n} from \"@material-ui/core\";\r\nimport { register } from \"./store/utils/thunkCreators\";\r\n\r\nconst Login = (props) => {\r\n  const history = useHistory();\r\n  const { user, register } = props;\r\n  const [formErrorMessage, setFormErrorMessage] = useState({});\r\n\r\n  const handleRegister = async (event) => {\r\n    event.preventDefault();\r\n    const username = event.target.username.value;\r\n    const email = event.target.email.value;\r\n    const password = event.target.password.value;\r\n    const confirmPassword = event.target.confirmPassword.value;\r\n\r\n    if (password !== confirmPassword) {\r\n      setFormErrorMessage({ confirmPassword: \"Passwords must match\" });\r\n      return;\r\n    }\r\n\r\n    await register({ username, email, password });\r\n  };\r\n\r\n  if (user.id) {\r\n    return <Redirect to=\"/home\" />;\r\n  }\r\n\r\n  return (\r\n    <Grid container justify=\"center\">\r\n      <Box>\r\n        <Grid container item>\r\n          <Typography>Need to log in?</Typography>\r\n          <Button onClick={() => history.push(\"/login\")}>Login</Button>\r\n        </Grid>\r\n        <form onSubmit={handleRegister}>\r\n          <Grid>\r\n            <Grid>\r\n              <FormControl>\r\n                <TextField\r\n                  aria-label=\"username\"\r\n                  label=\"Username\"\r\n                  name=\"username\"\r\n                  type=\"text\"\r\n                  required\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"E-mail address\"\r\n                  aria-label=\"e-mail address\"\r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  required\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid>\r\n              <FormControl error={!!formErrorMessage.confirmPassword}>\r\n                <TextField\r\n                  aria-label=\"password\"\r\n                  label=\"Password\"\r\n                  type=\"password\"\r\n                  inputProps={{ minLength: 6 }}\r\n                  name=\"password\"\r\n                  required\r\n                />\r\n                <FormHelperText>\r\n                  {formErrorMessage.confirmPassword}\r\n                </FormHelperText>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid>\r\n              <FormControl error={!!formErrorMessage.confirmPassword}>\r\n                <TextField\r\n                  label=\"Confirm Password\"\r\n                  aria-label=\"confirm password\"\r\n                  type=\"password\"\r\n                  inputProps={{ minLength: 6 }}\r\n                  name=\"confirmPassword\"\r\n                  required\r\n                />\r\n                <FormHelperText>\r\n                  {formErrorMessage.confirmPassword}\r\n                </FormHelperText>\r\n              </FormControl>\r\n            </Grid>\r\n            <Button type=\"submit\" variant=\"contained\" size=\"large\">\r\n              Create\r\n            </Button>\r\n          </Grid>\r\n        </form>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    register: (credentials) => {\r\n      dispatch(register(credentials));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","export default __webpack_public_path__ + \"static/media/bubble.c9bd866c.svg\";","export default __webpack_public_path__ + \"static/media/bg-img.0c5628a9.png\";","import React from \"react\";\r\nimport { Redirect, useHistory } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport bubble from './assets/images/bubble.svg';\r\nimport bgImg from './assets/images/bg-img.png';\r\nimport {\r\n  Grid,\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  FormControl,\r\n  TextField,\r\n  InputAdornment,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport { login } from \"./store/utils/thunkCreators\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    height: '100vh'\r\n  },\r\n  button: {\r\n    margin: '20px 10px 30px 10px',\r\n    padding: '10px 50px',\r\n  },\r\n  heading: {\r\n    margin: '10px 10px 10px 0px',\r\n    padding: '10px 30px 10px 0px',\r\n  },\r\n  sidebar: {\r\n    backgroundImage: `url(${bgImg})`,\r\n    backgroundRepeat: 'no-repeat',\r\n    textAlign: 'center',\r\n    width: '100%',\r\n    backgroundSize: 'cover',\r\n    margin: '0',\r\n  },\r\n  sidebarOverlay: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundImage: 'linear-gradient(to top, #3A8DFF, #86B9FF)',\r\n    opacity: '85%',\r\n    width: '100%',\r\n    height: '100%',\r\n    backgroundSize: 'cover',\r\n    color: 'white',\r\n    fontFamily: 'OpenSans - semibold, regular',\r\n  },\r\n  paper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    padding: '0 50px',\r\n    marginLeft: '30px',\r\n  },\r\n  form: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: '20px',\r\n  }\r\n}));\r\n\r\nconst Login = (props) => {\r\n  const history = useHistory();\r\n  const { user, login } = props;\r\n  const classes = useStyles();\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault();\r\n    const username = event.target.username.value;\r\n    const password = event.target.password.value;\r\n\r\n    await login({ username, password });\r\n  };\r\n\r\n  if (user.id) {\r\n    return <Redirect to=\"/home\" />;\r\n  }\r\n\r\n  return (\r\n    <Grid container justify=\"center\" className={classes.root}>\r\n\r\n      <Grid item xs={false} sm={false} md={5} lg={5} className={classes.sidebar}>\r\n        <Box className={classes.sidebarOverlay}>\r\n          <img src={bubble} alt=\"chat bubble\"\r\n            className={classes.button} />\r\n          <Typography variant=\"h4\" className={classes.button}>\r\n            Converse with anyone<br/>with any language\r\n          </Typography>\r\n        </Box>\r\n      </Grid>\r\n\r\n      <Grid item xs={12} sm={12} md={7} lg={7}>\r\n\r\n      <Box className={classes.paper}>\r\n\r\n        <Grid container justifyContent=\"flex-end\" alignItems=\"center\" md={12}>\r\n          <Typography className={classes.heading}>Need to register?</Typography>\r\n          <Button onClick={() => history.push(\"/register\")}\r\n            className={classes.heading}\r\n            color=\"primary\" size=\"large\">Register</Button>\r\n        </Grid>\r\n\r\n        <form onSubmit={handleLogin} className={classes.form}>\r\n          <Grid container md={9} >\r\n\r\n            <Typography variant=\"h5\" justify=\"flex-start\" className={classes.heading}>Welcome Back!</Typography>\r\n\r\n            <Grid container justifyContent=\"center\" md={12}>\r\n              <FormControl margin=\"normal\" required fullWidth>\r\n                <TextField\r\n                  color=\"primary\"\r\n                  margin=\"normal\"\r\n                  aria-label=\"username\"\r\n                  label=\"Username\"\r\n                  name=\"username\"\r\n                  type=\"text\"\r\n                />\r\n              </FormControl>\r\n\r\n              <FormControl margin=\"normal\" required fullWidth>\r\n                <TextField\r\n                  color=\"primary\"\r\n                  margin=\"normal\"\r\n                  label=\"password\"\r\n                  aria-label=\"password\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  InputProps={{ endAdornment:\r\n                    <InputAdornment position=\"end\">\r\n                      <Button color=\"primary\">Forgot?</Button>\r\n                    </InputAdornment>\r\n                  }}\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n\r\n            <Grid container item justifyContent=\"center\" md={12}>\r\n              <Button type=\"submit\" variant=\"contained\" size=\"large\" color=\"primary\"\r\n                className={classes.button}>\r\n                Login\r\n              </Button>\r\n            </Grid>\r\n\r\n          </Grid>\r\n        </form>\r\n\r\n      </Box>\r\n      </Grid>\r\n\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    login: (credentials) => {\r\n      dispatch(login(credentials));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    marginLeft: 20,\r\n    flexGrow: 1,\r\n  },\r\n  username: {\r\n    fontWeight: \"bold\",\r\n    letterSpacing: -0.2,\r\n  },\r\n  previewText: {\r\n    fontSize: 12,\r\n    color: \"#9CADC8\",\r\n    letterSpacing: -0.17,\r\n  },\r\n  previewTextNew: {\r\n    fontSize: 12,\r\n    color: \"black\",\r\n    letterSpacing: -0.17,\r\n    fontWeight: \"bold\",\r\n  },\r\n  badge: {\r\n\r\n  },\r\n  notification: {\r\n    height: 20,\r\n    width: 20,\r\n    backgroundColor: \"#3F92FF\",\r\n    marginRight: 10,\r\n    color: \"white\",\r\n    fontSize: 10,\r\n    letterSpacing: -0.5,\r\n    fontWeight: \"bold\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    borderRadius: 10,\r\n  },\r\n}));\r\n\r\nconst ChatContent = (props) => {\r\n  const classes = useStyles();\r\n\r\n  const { conversation } = props;\r\n  const { latestMessageText, otherUser } = conversation;\r\n\r\n  const [unreadMessages, setUnreadMessages] = useState([])\r\n\r\n  const countUnreadMessages = (messages) => {\r\n    messages.map(message => {\r\n      if (!message.read && message.senderId === otherUser.id) {\r\n        setUnreadMessages(prevMessages => prevMessages + message.id)\r\n      } else {\r\n        setUnreadMessages(unreadMessages)\r\n      } return unreadMessages\r\n    })\r\n  }\r\n\r\n \r\n  useEffect(() => {\r\n    countUnreadMessages(conversation.messages);\r\n  }, [latestMessageText])\r\n\r\n\r\n  return (\r\n    <Box className={classes.root}\r\n      onClick={() => setUnreadMessages([])}>\r\n      <Box className={classes.root}>\r\n        <Box>\r\n          <Typography className={classes.username}>\r\n            {otherUser.username}\r\n          </Typography>\r\n          <Typography className={unreadMessages.length > 0 ? classes.previewTextNew : classes.previewText}>\r\n            {latestMessageText}\r\n          </Typography>\r\n        </Box>\r\n        { unreadMessages.length > 0 &&\r\n          <span\r\n            className={classes.notification}\r\n          >{unreadMessages.length}\r\n          </span>}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ChatContent;\r\n","import React from \"react\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { connect } from \"react-redux\";\r\nimport { BadgeAvatar } from \"./index\";\r\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    height: 44,\r\n    marginTop: 23,\r\n    marginLeft: 6,\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  },\r\n  subContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    flexGrow: 1\r\n  },\r\n  username: {\r\n    letterSpacing: -0.23,\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    marginLeft: 17\r\n  },\r\n  ellipsis: {\r\n    color: \"#95A7C4\",\r\n    marginRight: 24,\r\n    opacity: 0.5\r\n  }\r\n}));\r\n\r\nconst CurrentUser = (props) => {\r\n  const classes = useStyles();\r\n\r\n  const user = props.user || {};\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <BadgeAvatar photoUrl={user.photoUrl} online={true} />\r\n      <Box className={classes.subContainer}>\r\n        <Typography className={classes.username}>{user.username}</Typography>\r\n        <MoreHorizIcon classes={{ root: classes.ellipsis }} />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(CurrentUser);\r\n","import React, { Component } from \"react\";\r\nimport { FormControl, FilledInput, InputAdornment } from \"@material-ui/core\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nconst styles = {\r\n  filledInput: {\r\n    height: 50,\r\n    background: \"#E9EEF9\",\r\n    borderRadius: 5,\r\n    fontSize: 13,\r\n    fontWeight: \"bold\",\r\n    color: \"#99A9C4\",\r\n    letterSpacing: 0,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    marginBottom: 20,\r\n  },\r\n  input: {\r\n    \"&::placeholder\": {\r\n      color: \"#ADC0DE\",\r\n      opacity: 1,\r\n    },\r\n  },\r\n};\r\n\r\nclass Search extends Component {\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    return (\r\n      <form onSubmit={this.handleSubmit}>\r\n        <FormControl fullWidth hiddenLabel>\r\n          <FilledInput\r\n            name=\"search\"\r\n            onChange={this.props.handleChange}\r\n            classes={{ root: classes.filledInput, input: classes.input }}\r\n            disableUnderline\r\n            placeholder=\"Search\"\r\n            startAdornment={\r\n              <InputAdornment position=\"start\">\r\n                <SearchIcon />\r\n              </InputAdornment>\r\n            }\r\n          ></FilledInput>\r\n        </FormControl>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Search);\r\n","import React from \"react\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { connect } from \"react-redux\";\r\nimport { Search, Chat, CurrentUser } from \"./index.js\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    paddingLeft: 21,\r\n    paddingRight: 21,\r\n    flexGrow: 1\r\n  },\r\n  title: {\r\n    fontSize: 20,\r\n    letterSpacing: -0.29,\r\n    fontWeight: \"bold\",\r\n    marginTop: 32,\r\n    marginBottom: 15\r\n  }\r\n}));\r\n\r\nconst Sidebar = (props) => {\r\n  const classes = useStyles();\r\n  const conversations = props.conversations || [];\r\n  const { handleChange, searchTerm, } = props;\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <CurrentUser />\r\n      <Typography className={classes.title}>Chats</Typography>\r\n      <Search handleChange={handleChange} />\r\n      {conversations\r\n        .filter((conversation) => conversation.otherUser.username.includes(searchTerm))\r\n        .map((conversation) => {\r\n          return <Chat conversation={conversation} key={conversation.otherUser.username} />;\r\n        })}\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    conversations: state.conversations\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Sidebar);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Sidebar } from \"./index\";\r\nimport { searchUsers } from \"../../store/utils/thunkCreators\";\r\nimport { clearSearchedUsers } from \"../../store/conversations\";\r\n\r\nconst SidebarContainer = (props) => {\r\n  const { searchUsers, clearSearchedUsers } = props;\r\n\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n  const handleChange = async (event) => {\r\n    if (event.target.value === \"\") {\r\n      // clear searched convos from redux store\r\n      clearSearchedUsers();\r\n      setSearchTerm(\"\");\r\n      return;\r\n    }\r\n    if (searchTerm.includes(event.target.value)) {\r\n      // if new value is included in search term, we don't need to make another API call, just need to set the search term value so the conversations can be filtered in the rendering\r\n      setSearchTerm(event.target.value);\r\n      return;\r\n    }\r\n    await searchUsers(event.target.value);\r\n    setSearchTerm(event.target.value);\r\n  };\r\n\r\n  return <Sidebar handleChange={handleChange} searchTerm={searchTerm} />;\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    searchUsers: (username) => {\r\n      dispatch(searchUsers(username));\r\n    },\r\n    clearSearchedUsers: () => {\r\n      dispatch(clearSearchedUsers());\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(SidebarContainer);\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { BadgeAvatar, ChatContent } from \"../Sidebar\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { setActiveChat } from \"../../store/activeConversation\";\r\nimport { connect } from \"react-redux\";\r\n\r\n\r\n\r\nconst styles = {\r\n  root: {\r\n    borderRadius: 8,\r\n    height: 80,\r\n    boxShadow: \"0 2px 10px 0 rgba(88,133,196,0.05)\",\r\n    marginBottom: 10,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    \"&:hover\": {\r\n      cursor: \"grab\",\r\n    },\r\n  },\r\n};\r\n\r\nconst Chat = (props) => {\r\n  const { classes } = props;\r\n  const otherUser = props.conversation.otherUser;\r\n\r\n  const handleClick = async (conversation) => {\r\n    await props.setActiveChat(conversation.otherUser.username);\r\n  };\r\n\r\n\r\n    return (\r\n      <Box\r\n        onClick={() => handleClick(props.conversation)}\r\n        className={classes.root}\r\n      >\r\n        <BadgeAvatar\r\n          photoUrl={otherUser.photoUrl}\r\n          username={otherUser.username}\r\n          online={otherUser.online}\r\n          sidebar={true}\r\n        />\r\n        <ChatContent conversation={props.conversation} />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    setActiveChat: (id) => {\r\n      dispatch(setActiveChat(id));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(Chat));\r\n","import React from \"react\";\r\nimport { Box, Badge, Avatar } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  profilePic: {\r\n    height: 44,\r\n    width: 44\r\n  },\r\n  badge: {\r\n    height: 13,\r\n    width: 13,\r\n    borderRadius: \"50%\",\r\n    border: \"2px solid white\",\r\n    backgroundColor: \"#D0DAE9\"\r\n  },\r\n  online: {\r\n    backgroundColor: \"#1CED84\"\r\n  },\r\n  sidebar: {\r\n    marginLeft: 17\r\n  }\r\n}));\r\n\r\nconst UserAvatar = (props) => {\r\n  const classes = useStyles();\r\n  const { sidebar, username, photoUrl, online } = props;\r\n\r\n  return (\r\n    <Box className={sidebar ? classes.sidebar : \"\"}>\r\n      <Badge\r\n        classes={{ badge: `${classes.badge} ${online && classes.online}` }}\r\n        variant=\"dot\"\r\n        anchorOrigin={{ horizontal: \"right\", vertical: \"bottom\" }}\r\n        overlap=\"circle\">\r\n        <Avatar alt={username} src={photoUrl} className={classes.profilePic}></Avatar>\r\n      </Badge>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default UserAvatar;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Avatar, Typography } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"flex-end\"\r\n  },\r\n  date: {\r\n    fontSize: 11,\r\n    color: \"#BECCE2\",\r\n    fontWeight: \"bold\",\r\n    marginBottom: 5\r\n  },\r\n  text: {\r\n    fontSize: 14,\r\n    color: \"#91A3C0\",\r\n    letterSpacing: -0.2,\r\n    padding: 8,\r\n    fontWeight: \"bold\"\r\n  },\r\n  bubble: {\r\n    background: \"#F4F6FA\",\r\n    borderRadius: \"10px 10px 0 10px\"\r\n  },\r\n  seenBySelf: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"flex-end\",\r\n  },\r\n  seenByOther: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"flex-start\",\r\n    marginLeft: 41\r\n  },\r\n  receiptPic: {\r\n    height: 15,\r\n    width: 15,\r\n    marginTop: 5\r\n  }  \r\n}));\r\n\r\nconst SenderBubble = (props) => {\r\n  const classes = useStyles();\r\n  const { time, text, otherUser, read, sendersRecent } = props;\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Typography className={classes.date}>{time}</Typography>\r\n      <Box className={classes.bubble}>\r\n        <Typography className={classes.text}>{text}</Typography>\r\n      </Box>\r\n      { read && sendersRecent.text === text ?\r\n        <Box className={classes.seenByOther}>\r\n          <Avatar className={classes.receiptPic}\r\n            src={otherUser.photoUrl} />\r\n        </Box>\r\n      :\r\n        \"\"}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default SenderBubble;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Typography, Avatar } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    display: \"flex\"\r\n  },\r\n  avatar: {\r\n    height: 30,\r\n    width: 30,\r\n    marginRight: 11,\r\n    marginTop: 6\r\n  },\r\n  usernameDate: {\r\n    fontSize: 11,\r\n    color: \"#BECCE2\",\r\n    fontWeight: \"bold\",\r\n    marginBottom: 5\r\n  },\r\n  bubble: {\r\n    backgroundImage: \"linear-gradient(225deg, #6CC1FF 0%, #3A8DFF 100%)\",\r\n    borderRadius: \"0 10px 10px 10px\"\r\n  },\r\n  text: {\r\n    fontSize: 14,\r\n    fontWeight: \"bold\",\r\n    color: \"#FFFFFF\",\r\n    letterSpacing: -0.2,\r\n    padding: 8\r\n  }\r\n}));\r\n\r\nconst OtherUserBubble = (props) => {\r\n  const classes = useStyles();\r\n  const { text, time, otherUser } = props;\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Avatar alt={otherUser.username} src={otherUser.photoUrl} className={classes.avatar}></Avatar>\r\n      <Box>\r\n        <Typography className={classes.usernameDate}>\r\n          {otherUser.username} {time}\r\n        </Typography>\r\n        <Box className={classes.bubble}>\r\n          <Typography className={classes.text}>{text}</Typography>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default OtherUserBubble;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { Input, Header, Messages } from \"./index\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexGrow: 8,\r\n    flexDirection: \"column\"\r\n  },\r\n  chatContainer: {\r\n    marginLeft: 41,\r\n    marginRight: 41,\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    flexGrow: 1,\r\n    justifyContent: \"space-between\"\r\n  }\r\n}));\r\n\r\nconst ActiveChat = (props) => {\r\n\r\n  const classes = useStyles();\r\n  const { user } = props;\r\n  const conversation = props.conversation || {};\r\n\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      {conversation.otherUser && (\r\n        <>\r\n          <Header\r\n            username={conversation.otherUser.username}\r\n            online={conversation.otherUser.online || false}\r\n          />\r\n          <Box className={classes.chatContainer}>\r\n            <Messages\r\n              conversation={conversation}\r\n              messages={conversation.messages}\r\n              otherUser={conversation.otherUser}\r\n              userId={user.id}\r\n              user={user}\r\n            />\r\n            <Input\r\n              otherUser={conversation.otherUser}\r\n              conversationId={conversation.id}\r\n              user={user}\r\n            />\r\n          </Box>\r\n        </>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n    conversation:\r\n      state.conversations &&\r\n      state.conversations.find(\r\n        (conversation) => conversation.otherUser.username === state.activeConversation\r\n      )\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, null)(ActiveChat);\r\n","import React, { Component } from \"react\";\r\nimport { FormControl, FilledInput } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { connect } from \"react-redux\";\r\nimport { postMessage } from \"../../store/utils/thunkCreators\";\r\n\r\nconst styles = {\r\n  root: {\r\n    justifySelf: \"flex-end\",\r\n    marginTop: 15,\r\n  },\r\n  input: {\r\n    height: 70,\r\n    backgroundColor: \"#F4F6FA\",\r\n    borderRadius: 8,\r\n    marginBottom: 20,\r\n  },\r\n};\r\n\r\nclass Input extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      text: \"\",\r\n    };\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    this.setState({\r\n      text: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    // add sender user info if posting to a brand new convo, so that the other user will have access to username, profile pic, etc.\r\n    const reqBody = {\r\n      text: event.target.text.value,\r\n      recipientId: this.props.otherUser.id,\r\n      conversationId: this.props.conversationId,\r\n      sender: this.props.conversationId ? null : this.props.user,\r\n    };\r\n    await this.props.postMessage(reqBody);\r\n    this.setState({\r\n      text: \"\",\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    return (\r\n      <form className={classes.root} onSubmit={this.handleSubmit}>\r\n        <FormControl fullWidth hiddenLabel>\r\n          <FilledInput\r\n            classes={{ root: classes.input }}\r\n            disableUnderline\r\n            placeholder=\"Type something...\"\r\n            value={this.state.text}\r\n            name=\"text\"\r\n            onChange={this.handleChange}\r\n          />\r\n        </FormControl>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n    conversations: state.conversations,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    postMessage: (message) => {\r\n      dispatch(postMessage(message));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(styles)(Input));\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    height: 89,\r\n    marginBottom: 34,\r\n    boxShadow: \"0 2px 20px 0 rgba(88,133,196,0.10)\"\r\n  },\r\n  content: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    marginLeft: 24\r\n  },\r\n  username: {\r\n    fontSize: 20,\r\n    letterSpacing: -0.29,\r\n    fontWeight: \"bold\",\r\n    marginRight: 14\r\n  },\r\n  statusText: {\r\n    fontSize: 12,\r\n    color: \"#BFC9DB\",\r\n    letterSpacing: -0.17\r\n  },\r\n  statusDot: {\r\n    height: 8,\r\n    width: 8,\r\n    borderRadius: \"50%\",\r\n    marginRight: 5,\r\n    backgroundColor: \"#D0DAE9\"\r\n  },\r\n  online: {\r\n    background: \"#1CED84\"\r\n  },\r\n  ellipsis: {\r\n    color: \"#95A7C4\",\r\n    marginRight: 24,\r\n    opacity: 0.5\r\n  }\r\n}));\r\n\r\nconst Header = (props) => {\r\n  const classes = useStyles();\r\n  const { username, online } = props;\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Box className={classes.content}>\r\n        <Typography className={classes.username}>{username}</Typography>\r\n        <Box className={`${classes.statusDot} ${classes[online && \"online\"]}`}></Box>\r\n        <Typography className={classes.statusText}>{online ? \"Online\" : \"Offline\"}</Typography>\r\n      </Box>\r\n      <MoreHorizIcon classes={{ root: classes.ellipsis }} />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { SenderBubble, OtherUserBubble } from \"../ActiveChat\";\r\nimport moment from \"moment\";\r\nimport { updateMessageReadStatus } from \"../../store/utils/thunkCreators\";\r\n\r\n\r\nconst Messages = (props) => {\r\n  const { conversation, messages, otherUser, userId } = props;\r\n\r\n  const recentMessage = messages[messages.length -1]\r\n  \r\n  const [sendersRecent, setSendersRecent] = useState(recentMessage)\r\n\r\n  const messagesByCurrentUser = [recentMessage]\r\n\r\n  useEffect(() => {\r\n    updateMessageReadStatus(conversation);\r\n    setSendersRecent(messagesByCurrentUser[messagesByCurrentUser.length -1]);\r\n  }, [conversation, recentMessage])\r\n\r\n  return (\r\n    <Box>\r\n      {messages.map((message) => {\r\n        const time = moment(message.createdAt).format(\"h:mm\");\r\n\r\n        if (message.read && message.senderId === userId) {\r\n          messagesByCurrentUser.push(message);\r\n        }\r\n\r\n        return message.senderId === userId ? (\r\n          <SenderBubble key={message.id} text={message.text} time={time} otherUser={otherUser}\r\n             recentMessage={recentMessage} read={message.read} sendersRecent={sendersRecent} />\r\n        ) : (\r\n          <OtherUserBubble key={message.id} text={message.text} time={time} otherUser={otherUser} \r\n            sendersRecent={sendersRecent} />\r\n        );\r\n      })}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Messages;\r\n","import React, { Component } from \"react\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { Grid, CssBaseline, Button } from \"@material-ui/core\";\r\nimport { SidebarContainer } from \"./Sidebar\";\r\nimport { ActiveChat } from \"./ActiveChat\";\r\nimport { logout, fetchConversations } from \"../store/utils/thunkCreators\";\r\nimport { clearOnLogout } from \"../store/index\";\r\n\r\nconst styles = {\r\n  root: {\r\n    height: \"97vh\",\r\n  },\r\n};\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoggedIn: false,\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.user.id !== prevProps.user.id) {\r\n      this.setState({\r\n        isLoggedIn: true,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.fetchConversations();\r\n  }\r\n\r\n  handleLogout = async () => {\r\n    await this.props.logout(this.props.user.id);\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    if (!this.props.user.id) {\r\n      // If we were previously logged in, redirect to login instead of register\r\n      if (this.state.isLoggedIn) return <Redirect to=\"/login\" />;\r\n      return <Redirect to=\"/register\" />;\r\n    }\r\n    return (\r\n      <>\r\n        {/* logout button will eventually be in a dropdown next to username */}\r\n        <Button className={classes.logout} onClick={this.handleLogout}>\r\n          Logout\r\n        </Button>\r\n        <Grid container component=\"main\" className={classes.root}>\r\n          <CssBaseline />\r\n          <SidebarContainer />\r\n          <ActiveChat />\r\n        </Grid>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n    conversations: state.conversations,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    logout: (id) => {\r\n      dispatch(logout(id));\r\n      dispatch(clearOnLogout());\r\n    },\r\n    fetchConversations: () => {\r\n      dispatch(fetchConversations());\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(styles)(Home));\r\n","import React from \"react\";\r\nimport { Button, Snackbar } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Close from \"@material-ui/icons/Close\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  snackbar: {\r\n    backgroundColor: \"red\",\r\n    fontWeight: \"bold\"\r\n  },\r\n  icon: {\r\n    color: \"white\"\r\n  }\r\n}));\r\n\r\nconst SnackbarError = (props) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Snackbar\r\n      open={props.snackBarOpen}\r\n      onClose={() => props.setSnackBarOpen(false)}\r\n      message={props.errorMessage || \"Sorry, an error occured. Please try again\"}\r\n      action={\r\n        <React.Fragment>\r\n          <Button\r\n            className={classes.icon}\r\n            size=\"small\"\r\n            onClick={() => props.setSnackBarOpen(false)}>\r\n            <Close color=\"secondary\" />\r\n          </Button>\r\n        </React.Fragment>\r\n      }\r\n      ContentProps={{\r\n        classes: {\r\n          root: classes.snackbar\r\n        }\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SnackbarError;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Route, Switch, withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchUser } from \"./store/utils/thunkCreators\";\r\nimport Signup from \"./Signup.js\";\r\nimport Login from \"./Login.js\";\r\nimport { Home, SnackbarError } from \"./components\";\r\n\r\nconst Routes = (props) => {\r\n  const { user, fetchUser } = props;\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [snackBarOpen, setSnackBarOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchUser();\r\n  }, [fetchUser]);\r\n\r\n  useEffect(() => {\r\n    if (user.error) {\r\n      // check to make sure error is what we expect, in case we get an unexpected server error object\r\n      if (typeof user.error === \"string\") {\r\n        setErrorMessage(user.error);\r\n      } else {\r\n        setErrorMessage(\"Internal Server Error. Please try again\");\r\n      }\r\n      setSnackBarOpen(true);\r\n    }\r\n  }, [user.error]);\r\n\r\n  if (props.user.isFetchingUser) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {snackBarOpen && (\r\n        <SnackbarError\r\n          setSnackBarOpen={setSnackBarOpen}\r\n          errorMessage={errorMessage}\r\n          snackBarOpen={snackBarOpen}\r\n        />\r\n      )}\r\n      <Switch>\r\n        <Route path=\"/login\" component={Login} />\r\n        <Route path=\"/register\" component={Signup} />\r\n        <Route\r\n          exact\r\n          path=\"/\"\r\n          render={(props) => (props.user?.id ? <Home /> : <Signup />)}\r\n        />\r\n        <Route path=\"/home\" component={Home} />\r\n      </Switch>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchUser() {\r\n      dispatch(fetchUser());\r\n    },\r\n  };\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Routes));\r\n","import React from \"react\";\r\nimport { MuiThemeProvider } from \"@material-ui/core\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store\";\r\n\r\nimport { theme } from \"./themes/theme\";\r\nimport Routes from \"./routes\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <MuiThemeProvider theme={theme}>\r\n        <BrowserRouter>\r\n          <Routes />\r\n        </BrowserRouter>\r\n      </MuiThemeProvider>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}